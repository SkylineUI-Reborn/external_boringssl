{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b80eda6b_ef38aa37",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 69,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2022-01-28T16:28:46Z",
      "side": 1,
      "message": "Drive-by comment: POSIX feature flags are bad and you should do whatever makes it build. If what you\u0027ve got works, great just do that. But if it doesn\u0027t work, some things that might be the cause / some alternate options that might work:\n\n- As far as I\u0027m aware, the only platforms that needs _XOPEN_SOURCE are glibc-based ones. The failure mode is pthread_rwlock is missing. That mights you might need to include some Linux-based target, if you all build this on Linux proper.\n\n- We\u0027ve since realized that glibc\u0027s stupidity around _XOPEN_SOURCE is gated on __STRICT_ANSI__, which is defined by gcc/clang if you use -std\u003dc99 (etc.) instead of -std\u003dgnu99 (etc.). The GNU variants are actually the default. So if conditioning things is too much of a pain, you can try flipping from the c?? variant to the gnu?? variant and dropping _XOPEN_SOURCE.\n\n- Would be nice to switch that 99 to 11 (or Soong defaults if they\u0027re already high enough), but no sense to tie this CL\u0027s fate to it. :-)",
      "revId": "c89c5f5832e2dd87dc4d55e56466a1789af5eca1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}